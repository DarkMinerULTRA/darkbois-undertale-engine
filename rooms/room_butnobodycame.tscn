[gd_scene load_steps=44 format=3 uid="uid://cr7kr17qo5acj"]

[ext_resource type="Script" path="res://rooms/room_butnobodycame.gd" id="1_dswo7"]
[ext_resource type="PackedScene" uid="uid://bl1mx4aqc42po" path="res://objects/ui_box.tscn" id="4_xbw2x"]
[ext_resource type="Script" path="res://scripts/scr_BattleDialog.gd" id="5_pkbee"]
[ext_resource type="FontFile" uid="uid://d0lg6tdg5vcrf" path="res://assets/fonts/DTM-Mono.otf" id="6_ru7rk"]
[ext_resource type="AudioStream" uid="uid://bjjjmrnpddwwd" path="res://assets/sounds/SND_TXT2.wav" id="7_ous4e"]
[ext_resource type="Texture2D" uid="uid://b4if6gpi5qd4" path="res://assets/sprites/battle/buttons/spr_fightbt_center_0.png" id="8_cusk2"]
[ext_resource type="Texture2D" uid="uid://c5ve853nuxvxg" path="res://assets/sprites/battle/buttons/spr_fightbt_center_1.png" id="9_ot43i"]
[ext_resource type="Texture2D" uid="uid://dp60n52121nyt" path="res://assets/sprites/battle/buttons/spr_itembt_0.png" id="10_4x7e1"]
[ext_resource type="Texture2D" uid="uid://dgemawwnkts30" path="res://assets/sprites/battle/buttons/spr_itembt_1.png" id="11_7cyua"]
[ext_resource type="Texture2D" uid="uid://d37tjoc4dhyph" path="res://assets/sprites/battle/buttons/spr_sparebt_0.png" id="12_kkgtw"]
[ext_resource type="Texture2D" uid="uid://d4dvo12orpkpe" path="res://assets/sprites/battle/buttons/spr_sparebt_1.png" id="13_bvsfy"]
[ext_resource type="Texture2D" uid="uid://cccgety4jr8om" path="res://assets/sprites/battle/buttons/spr_actbt_center_0.png" id="14_fibtc"]
[ext_resource type="Texture2D" uid="uid://cmu073mg3trql" path="res://assets/sprites/battle/buttons/spr_actbt_center_1.png" id="15_sin3r"]
[ext_resource type="Script" path="res://scripts/scr_fightbutton.gd" id="16_c4vro"]
[ext_resource type="FontFile" uid="uid://bekv2hb21mm8w" path="res://assets/fonts/Mars Needs Cunnilingus.ttf" id="17_v2ob7"]
[ext_resource type="Script" path="res://scripts/scr_set_text_to_savedata.gd" id="18_xi1ms"]
[ext_resource type="Texture2D" uid="uid://bpswmm6tj64er" path="res://assets/sprites/battle/healthbar1.png" id="19_rwa3y"]
[ext_resource type="Texture2D" uid="uid://du5qvjeceyx1t" path="res://assets/sprites/battle/healthbar0.png" id="20_hc672"]
[ext_resource type="Script" path="res://scripts/scr_healthbar.gd" id="21_220mx"]
[ext_resource type="Script" path="res://scripts/scr_hp.gd" id="22_jgnhp"]
[ext_resource type="Texture2D" uid="uid://c3gvx5o27yy87" path="res://assets/sprites/battle/spr_battlebg_0.png" id="26_syshq"]
[ext_resource type="Texture2D" uid="uid://c16ywqxh4ryg2" path="res://assets/sprites/battle/weapons/spr_slice_o_0.png" id="28_vca1u"]
[ext_resource type="Texture2D" uid="uid://c1kbhlkx5fc8x" path="res://assets/sprites/battle/weapons/spr_slice_o_1.png" id="29_3gbqs"]
[ext_resource type="Texture2D" uid="uid://bom0ew0nt5uof" path="res://assets/sprites/battle/weapons/spr_slice_o_2.png" id="30_fpbss"]
[ext_resource type="Texture2D" uid="uid://nysrlii76225" path="res://assets/sprites/battle/weapons/spr_slice_o_3.png" id="31_xxnn4"]
[ext_resource type="Texture2D" uid="uid://bvvwib57hjkwf" path="res://assets/sprites/battle/weapons/spr_slice_o_4.png" id="32_0fxds"]
[ext_resource type="Texture2D" uid="uid://dtiq4dlowiukx" path="res://assets/sprites/battle/weapons/spr_slice_o_5.png" id="33_0y0wl"]
[ext_resource type="Script" path="res://scripts/scr_enemy.gd" id="34_jcr86"]
[ext_resource type="Texture2D" uid="uid://bk0blb0s7scqe" path="res://assets/sprites/battle/spr_targetchoice_0.png" id="35_s4xhy"]
[ext_resource type="Texture2D" uid="uid://cx3y4r2tr1j1l" path="res://assets/sprites/battle/spr_targetchoice_1.png" id="36_cogi0"]
[ext_resource type="Script" path="res://scripts/scr_attackbar.gd" id="37_u2ck6"]
[ext_resource type="Texture2D" uid="uid://clpi2ns0123ht" path="res://assets/sprites/battle/spr_target_0.png" id="38_txoij"]
[ext_resource type="Texture2D" uid="uid://cv04on3v2qxwp" path="res://assets/sprites/battle/enemyhealthbar1.png" id="39_iu7ij"]
[ext_resource type="Texture2D" uid="uid://ca1incftg6v04" path="res://assets/sprites/battle/enemyhealthbar0.png" id="40_5xw34"]
[ext_resource type="Script" path="res://scripts/scr_enemybar.gd" id="41_bao3i"]
[ext_resource type="PackedScene" uid="uid://cyfnd7p03p2ph" path="res://objects/bubbles/speechbubblel.tscn" id="42_j2jbc"]

[sub_resource type="SpriteFrames" id="SpriteFrames_1pw0s"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_cusk2")
}, {
"duration": 1.0,
"texture": ExtResource("9_ot43i")
}],
"loop": true,
"name": &"fight",
"speed": 0.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_4x7e1")
}, {
"duration": 1.0,
"texture": ExtResource("11_7cyua")
}],
"loop": true,
"name": &"item",
"speed": 0.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_kkgtw")
}, {
"duration": 1.0,
"texture": ExtResource("13_bvsfy")
}],
"loop": true,
"name": &"spare",
"speed": 0.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("14_fibtc")
}, {
"duration": 1.0,
"texture": ExtResource("15_sin3r")
}],
"loop": true,
"name": &"talk",
"speed": 0.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_ujna8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": null
}, {
"duration": 1.0,
"texture": ExtResource("28_vca1u")
}, {
"duration": 1.0,
"texture": ExtResource("29_3gbqs")
}, {
"duration": 1.0,
"texture": ExtResource("30_fpbss")
}, {
"duration": 1.0,
"texture": ExtResource("31_xxnn4")
}, {
"duration": 1.0,
"texture": ExtResource("32_0fxds")
}, {
"duration": 1.0,
"texture": ExtResource("33_0y0wl")
}, {
"duration": 1.0,
"texture": null
}],
"loop": false,
"name": &"default",
"speed": 6.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_6mf8o"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("35_s4xhy")
}, {
"duration": 1.0,
"texture": ExtResource("36_cogi0")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}]

[sub_resource type="Animation" id="Animation_rxrl3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1e-05, 0.5)]
}

[sub_resource type="Animation" id="Animation_8em8p"]
resource_name = "fightappear"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1e-05, 0.5), Vector2(0.5, 0.5)]
}

[sub_resource type="Animation" id="Animation_nqino"]
resource_name = "fightdissapear"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0.5, 0.5), Vector2(1e-05, 0.5)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_81up8"]
_data = {
"RESET": SubResource("Animation_rxrl3"),
"fightappear": SubResource("Animation_8em8p"),
"fightdissapear": SubResource("Animation_nqino")
}

[node name="room_battle" type="Node2D"]
script = ExtResource("1_dswo7")

[node name="BattleBox" type="Node2D" parent="."]
position = Vector2(160, 157)
script = ExtResource("5_pkbee")

[node name="UiBox" parent="BattleBox" instance=ExtResource("4_xbw2x")]
position = Vector2(0, -2)
size = Vector2(289, 72)

[node name="Label" type="Label" parent="BattleBox"]
texture_filter = 1
offset_left = -133.0
offset_top = -28.0
offset_right = 135.0
offset_bottom = -8.0
scale = Vector2(0.5, 0.5)
theme_override_constants/line_spacing = 1
theme_override_fonts/font = ExtResource("6_ru7rk")
theme_override_font_sizes/font_size = 13
text = "* But nobody came."

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="BattleBox"]
stream = ExtResource("7_ous4e")

[node name="UI" type="Node2D" parent="."]

[node name="fight" type="AnimatedSprite2D" parent="UI"]
texture_filter = 1
position = Vector2(41, 223)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_1pw0s")
animation = &"fight"
script = ExtResource("16_c4vro")

[node name="act" type="AnimatedSprite2D" parent="UI"]
texture_filter = 1
position = Vector2(121, 223)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_1pw0s")
animation = &"talk"
script = ExtResource("16_c4vro")
id = 1

[node name="item" type="AnimatedSprite2D" parent="UI"]
texture_filter = 1
position = Vector2(201, 223)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_1pw0s")
animation = &"item"
script = ExtResource("16_c4vro")
id = 2

[node name="spare" type="AnimatedSprite2D" parent="UI"]
texture_filter = 1
position = Vector2(281, 223)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_1pw0s")
animation = &"spare"
script = ExtResource("16_c4vro")
id = 3

[node name="Label" type="Label" parent="UI"]
texture_filter = 1
offset_left = 20.0
offset_top = 197.0
offset_right = 60.0
offset_bottom = 220.0
theme_override_fonts/font = ExtResource("17_v2ob7")
theme_override_font_sizes/font_size = 12
text = "CHARA"
script = ExtResource("18_xi1ms")
dataName = "name"

[node name="Label2" type="Label" parent="UI"]
texture_filter = 1
offset_left = 78.0
offset_top = 197.0
offset_right = 118.0
offset_bottom = 220.0
theme_override_fonts/font = ExtResource("17_v2ob7")
theme_override_font_sizes/font_size = 12
text = "LV 1"
script = ExtResource("18_xi1ms")
prefix = "LV "
dataName = "lv"

[node name="Label3" type="Label" parent="UI"]
texture_filter = 1
offset_left = 116.0
offset_top = 197.0
offset_right = 156.0
offset_bottom = 220.0
theme_override_fonts/font = ExtResource("17_v2ob7")
theme_override_font_sizes/font_size = 12
text = "HP"

[node name="TextureProgressBar" type="TextureProgressBar" parent="UI"]
offset_left = 140.0
offset_top = 197.0
offset_right = 160.0
offset_bottom = 217.0
scale = Vector2(1, 0.5)
max_value = 20.0
texture_under = ExtResource("19_rwa3y")
texture_progress = ExtResource("20_hc672")
script = ExtResource("21_220mx")

[node name="Label4" type="Label" parent="UI"]
texture_filter = 1
offset_left = 167.0
offset_top = 197.0
offset_right = 207.0
offset_bottom = 220.0
theme_override_fonts/font = ExtResource("17_v2ob7")
theme_override_font_sizes/font_size = 12
text = "20/20"
script = ExtResource("22_jgnhp")

[node name="SprBattlebg1" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(160, 120)
scale = Vector2(0.5, 0.5)
texture = ExtResource("26_syshq")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]

[node name="slash" type="AnimatedSprite2D" parent="."]
texture_filter = 1
position = Vector2(163, 62)
sprite_frames = SubResource("SpriteFrames_ujna8")
frame = 7
frame_progress = 1.0
script = ExtResource("34_jcr86")

[node name="attackbar" type="AnimatedSprite2D" parent="."]
z_index = 1
position = Vector2(290, 157)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_6mf8o")
autoplay = "default"
frame_progress = 0.225795
script = ExtResource("37_u2ck6")

[node name="SprTarget0" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(162, 157)
scale = Vector2(1e-05, 0.5)
texture = ExtResource("38_txoij")

[node name="AnimationPlayer" type="AnimationPlayer" parent="SprTarget0"]
libraries = {
"": SubResource("AnimationLibrary_81up8")
}

[node name="EnemyHealth" type="TextureProgressBar" parent="."]
visible = false
offset_left = 60.0
offset_top = 80.0
offset_right = 80.0
offset_bottom = 100.0
scale = Vector2(10, 0.4)
step = 0.01
value = 50.0
texture_under = ExtResource("39_iu7ij")
texture_progress = ExtResource("40_5xw34")
script = ExtResource("41_bao3i")

[node name="speechbubble" parent="." instance=ExtResource("42_j2jbc")]
visible = false
position = Vector2(248, 74)
